# vecDB

–í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–∞—è –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ Rust —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Locality-Sensitive Hashing (LSH) –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤.

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **LSH-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–æ–≤ –≤ –±–∞–∫–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ Locality-Sensitive Hashing
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Euclidean, Cosine –∏ Manhattan —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π
- **–ì–∏–±–∫–∞—è —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å**: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å –≤–µ–∫—Ç–æ—Ä–æ–≤ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏ –≤–µ–∫—Ç–æ—Ä–æ–≤
- **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∏—Å–∫ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∑–∫–∏
- **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤–µ–∫—Ç–æ—Ä–æ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞**: –£–¥–∞–ª–µ–Ω–∏–µ –ø—É—Å—Ç—ã—Ö –±–∞–∫–µ—Ç–æ–≤ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –≤–µ–∫—Ç–æ—Ä–æ–≤
- **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –Ω–∞ Rust

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Rust 1.70+
- Cargo

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone https://github.com/ItmoCV/vecDB.git
cd vecDB
cargo build
```

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **Collection**: –ö–æ–ª–ª–µ–∫—Ü–∏—è –≤–µ–∫—Ç–æ—Ä–æ–≤ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–π –º–µ—Ç—Ä–∏–∫–æ–π LSH –∏ —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å—é
- **Bucket**: –ì—Ä—É–ø–ø–∞ –ø–æ—Ö–æ–∂–∏—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤, —Å–æ–∑–¥–∞–Ω–Ω–∞—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º LSH
- **Vector**: –û—Ç–¥–µ–ª—å–Ω—ã–π –≤–µ–∫—Ç–æ—Ä —Å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–º, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
- **LSH**: –ê–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ—Ö–æ–∂–∏—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```
Collection
‚îú‚îÄ‚îÄ name: String
‚îú‚îÄ‚îÄ vector_dimension: usize
‚îú‚îÄ‚îÄ lsh_metric: LSHMetric
‚îî‚îÄ‚îÄ buckets_controller: BucketController
    ‚îî‚îÄ‚îÄ buckets: Vec<Bucket>
        ‚îî‚îÄ‚îÄ vectors_controller: VectorController
            ‚îî‚îÄ‚îÄ vectors: Vec<Vector>
```

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏

```rust
use vecDB::core::controllers::{CollectionController, StorageController};
use vecDB::core::lsh::LSHMetric;
use std::collections::HashMap;

// –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
let storage_controller = StorageController::new(HashMap::new());
let mut collection_controller = CollectionController::new(storage_controller);

// –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —Å —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å—é 384 –∏ –º–µ—Ç—Ä–∏–∫–æ–π Euclidean
let collection_name = "my_documents".to_string();
let vector_dimension = 384;
collection_controller.add_collection(
    collection_name.clone(), 
    LSHMetric::Euclidean, 
    vector_dimension
).unwrap();
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–æ–≤

```rust
use std::collections::HashMap;

// –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
let embedding = vec![0.1, 0.2, 0.3, /* ... 384 —ç–ª–µ–º–µ–Ω—Ç–∞ */];
let mut metadata = HashMap::new();
metadata.insert("category".to_string(), "document".to_string());
metadata.insert("author".to_string(), "John Doe".to_string());

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é
let vector_id = collection_controller.add_vector(
    &collection_name, 
    embedding, 
    metadata
).unwrap();
```

### –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤

```rust
// –ü–æ–∏—Å–∫ 5 –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ—Ö–æ–∂–∏—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤
let query_vector = vec![0.1, 0.2, 0.3, /* ... */];
let results = collection_controller.search_similar(
    &collection_name,
    &query_vector,
    5
).unwrap();

for (vector_id, similarity_score) in results {
    println!("Vector ID: {}, Similarity: {}", vector_id, similarity_score);
}
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–æ–≤

```rust
// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∞ –≤–µ–∫—Ç–æ—Ä–∞
let new_embedding = vec![0.4, 0.5, 0.6, /* ... */];
let new_metadata = HashMap::new();
new_metadata.insert("updated".to_string(), "true".to_string());

collection_controller.update_vector(
    &collection_name,
    vector_id,
    Some(new_embedding),
    Some(new_metadata)
).unwrap();
```

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞

```rust
// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
if let Some(collection) = collection_controller.get_collection(&collection_name) {
    collection_controller.dump_one(collection);
    println!("–ö–æ–ª–ª–µ–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!");
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
collection_controller.load_one(collection_name.clone());
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è LSH

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

- **Euclidean**: –ï–≤–∫–ª–∏–¥–æ–≤–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
- **Cosine**: –ö–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ
- **Manhattan**: –ú–∞–Ω—Ö—ç—Ç—Ç–µ–Ω—Å–∫–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è

–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ:

```
storage/
‚îú‚îÄ‚îÄ collection_name/
‚îÇ   ‚îú‚îÄ‚îÄ 0.bin                    # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ bucket_id_1/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 0.bin               # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –±–∞–∫–µ—Ç–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ vectors/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ vector_id_1.bin # –í–µ–∫—Ç–æ—Ä 1
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ vector_id_2.bin # –í–µ–∫—Ç–æ—Ä 2
‚îÇ   ‚îî‚îÄ‚îÄ bucket_id_2/
‚îÇ       ‚îú‚îÄ‚îÄ 0.bin
‚îÇ       ‚îî‚îÄ‚îÄ vectors/
‚îÇ           ‚îî‚îÄ‚îÄ vector_id_3.bin
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
cargo test

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
cargo test test_vector_dimension_validation

# –ó–∞–ø—É—Å–∫ —Å –≤—ã–≤–æ–¥–æ–º
cargo test -- --nocapture
```

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã

#### –¢–µ—Å—Ç—ã VectorController

- **`add_and_get_vector`**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –±–∞–∑–æ–≤–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∏ –µ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ ID. –£–±–µ–∂–¥–∞–µ—Ç—Å—è, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏ –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

- **`add_and_remove_metadata`**: –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —É —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∏ —É–¥–∞–ª—è—é—Ç—Å—è –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥—Ä—É–≥–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

- **`update_vector_replaces_data`**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ embedding –≤–µ–∫—Ç–æ—Ä–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö. –£–±–µ–∂–¥–∞–µ—Ç—Å—è, —á—Ç–æ –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–º–µ–Ω—è—é—Ç —Å—Ç–∞—Ä—ã–µ.

- **`update_vector_replaces_metadata`**: –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –≤–µ–∫—Ç–æ—Ä–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ embedding. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–ª–Ω—É—é –∑–∞–º–µ–Ω—É –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö.

- **`remove_vector_deletes_entry`**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ –∏–∑ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞. –£–±–µ–∂–¥–∞–µ—Ç—Å—è, —á—Ç–æ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –≤–µ–∫—Ç–æ—Ä –±–æ–ª—å—à–µ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.

- **`filter_by_metadata_returns_only_matching_ids`**: –¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –≤–µ–∫—Ç–æ—Ä–æ–≤ –ø–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–µ–∫—Ç–æ—Ä—ã, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∑–∞–¥–∞–Ω–Ω—ã–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º.

- **`find_most_similar_returns_k_vectors`**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–∏—Å–∫ k –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ—Ö–æ–∂–∏—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤. –£–±–µ–∂–¥–∞–µ—Ç—Å—è, —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —É–±—ã–≤–∞–Ω–∏—é —Å—Ö–æ–∂–µ—Å—Ç–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–µ–∫—Ç–æ—Ä–æ–≤.

- **`operations_fail_for_missing_vector`**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ) –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤–µ–∫—Ç–æ—Ä—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ—à–∏–±–∫–∏.

#### –¢–µ—Å—Ç—ã LSH —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

- **`test_lsh_basic_functionality`**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –±–∞–∑–æ–≤—É—é —Ä–∞–±–æ—Ç—É LSH ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ, —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–æ–≤, –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Ö—ç—à–µ–π –¥–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤. –£–±–µ–∂–¥–∞–µ—Ç—Å—è, —á—Ç–æ –ø–æ—Ö–æ–∂–∏–µ –≤–µ–∫—Ç–æ—Ä—ã –ø–æ–ª—É—á–∞—é—Ç –±–ª–∏–∑–∫–∏–µ —Ö—ç—à–∏.

- **`test_bucket_controller_creation`**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –±–∞–∫–µ—Ç–æ–≤, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏ –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –±–∞–∫–µ—Ç–æ–≤/–≤–µ–∫—Ç–æ—Ä–æ–≤ –≤ –Ω–∞—á–∞–ª–µ.

- **`test_bucket_controller_add_vectors`**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–æ–≤ –≤ –±–∞–∫–µ—Ç—ã, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤–µ–∫—Ç–æ—Ä–æ–≤ –∏ –±–∞–∫–µ—Ç–æ–≤, –∞ —Ç–∞–∫–∂–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–µ–Ω–∏—è –≤–µ–∫—Ç–æ—Ä–æ–≤ –ø–æ ID.

- **`test_bucket_controller_similarity_search`**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤ –≤ –±–∞–∫–µ—Ç–∞—Ö —Å –ø–æ–º–æ—â—å—é LSH, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞ –ø–æ —Å—Ö–æ–∂–µ—Å—Ç–∏.

- **`test_bucket_controller_multi_bucket_search`**: –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –ø–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±–∞–∫–µ—Ç–∞—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç—É –º—É–ª—å—Ç–∏-–±–∞–∫–µ—Ç–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞.

- **`test_bucket_controller_metadata_filtering`**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –≤–µ–∫—Ç–æ—Ä–æ–≤ –ø–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ LSH. –£–±–µ–∂–¥–∞–µ—Ç—Å—è, —á—Ç–æ –ø–æ–∏—Å–∫ —É—á–∏—Ç—ã–≤–∞–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ.

- **`test_bucket_controller_statistics`**: –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ LSH –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–æ–¥—Å—á–µ—Ç–∞ –≤–µ–∫—Ç–æ—Ä–æ–≤, –±–∞–∫–µ—Ç–æ–≤ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ LSH.

- **`test_bucket_controller_remove_vector`**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É–¥–∞–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–æ–≤ –∏–∑ LSH –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞. –£–±–µ–∂–¥–∞–µ—Ç—Å—è, —á—Ç–æ –≤–µ–∫—Ç–æ—Ä—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –±–∞–∫–µ—Ç–æ–≤.

#### –¢–µ—Å—Ç—ã –∫–æ–ª–ª–µ–∫—Ü–∏–π –∏ –º–µ—Ç—Ä–∏–∫

- **`test_collection_with_different_metrics`**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç—É –∫–æ–ª–ª–µ–∫—Ü–∏–π —Å —Ä–∞–∑–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ LSH (–µ–≤–∫–ª–∏–¥–æ–≤–∞, –∫–æ—Å–∏–Ω—É—Å–Ω–∞—è, –º–∞–Ω—Ö—ç—Ç—Ç–µ–Ω—Å–∫–∞—è), –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∞–∂–¥–æ–π –º–µ—Ç—Ä–∏–∫–∏.

- **`test_lsh_metric_serialization`**: –¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é –∏ –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é –º–µ—Ç—Ä–∏–∫ LSH. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫ –≤ —Å—Ç—Ä–æ–∫–∏ –∏ –æ–±—Ä–∞—Ç–Ω–æ.

#### –¢–µ—Å—Ç—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

- **`test_vector_storage_in_buckets`**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫—É –≤–µ–∫—Ç–æ—Ä–æ–≤ –≤/–∏–∑ –±–∞–∫–µ—Ç–æ–≤. –£–±–µ–∂–¥–∞–µ—Ç—Å—è, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ –¥–∏—Å–∫ –∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ.

- **`test_bucket_storage_in_own_folder`**: –¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö –±–∞–∫–µ—Ç–æ–≤ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–∞–ø–∫–∞—Ö. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –±–∞–∫–µ—Ç–æ–≤.

#### –¢–µ—Å—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

- **`test_vector_moves_between_buckets_on_update`**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –≤–µ–∫—Ç–æ—Ä–∞ (–∏–∑–º–µ–Ω–µ–Ω–∏–∏ embedding) –æ–Ω –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –≤ –¥—Ä—É–≥–æ–π –±–∞–∫–µ—Ç, –∞ –≤ —Å—Ç–∞—Ä–æ–º –±–æ–ª—å—à–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è.

- **`test_vector_dimension_validation`**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å—é –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É, –∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π ‚Äî –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ. –£–±–µ–∂–¥–∞–µ—Ç—Å—è –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏.

- **`test_empty_bucket_removal_on_vector_update`**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –≤–µ–∫—Ç–æ—Ä–∞ –ø—É—Å—Ç—ã–µ –±–∞–∫–µ—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ —Å–∏—Å—Ç–µ–º—ã.

- **`test_empty_bucket_removal_on_vector_deletion`**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –≤–µ–∫—Ç–æ—Ä–∞ –ø—É—Å—Ç—ã–µ –±–∞–∫–µ—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ —Å–∏—Å—Ç–µ–º—ã.

## üîç API Reference

### CollectionController

#### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

- `add_collection(name, lsh_metric, vector_dimension)` - –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
- `add_vector(collection_name, embedding, metadata)` - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞
- `search_similar(collection_name, query, k)` - –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤
- `update_vector(collection_name, vector_id, embedding, metadata)` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞
- `delete_vector(collection_name, vector_id)` - –£–¥–∞–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏

- `get_collection(name)` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
- `get_all_collections()` - –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π
- `delete_collection(name)` - –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
- `dump_one(collection)` - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
- `load_one(name)` - –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏

### BucketController

- `add_vector(embedding, metadata)` - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ –≤ –±–∞–∫–µ—Ç
- `get_bucket(id)` - –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–∫–µ—Ç–∞ –ø–æ ID
- `get_all_buckets()` - –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –±–∞–∫–µ—Ç–æ–≤
- `find_similar(query, k)` - –ü–æ–∏—Å–∫ –≤ –æ–¥–Ω–æ–º –±–∞–∫–µ—Ç–µ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ—Å–ª–∏ —Ä–∞–∑–º–µ—Ä –±–∞–∫–µ—Ç–∞ >= k)
- `find_similar_multi_bucket(query, k)` - –ü–æ–∏—Å–∫ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±–∞–∫–µ—Ç–∞—Ö (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ—Å–ª–∏ —Ä–∞–∑–º–µ—Ä –±–∞–∫–µ—Ç–∞ < k)
- `update_vector(vector_id, embedding, metadata)` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞

#### –£–º–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤
–ú–µ—Ç–æ–¥ `find_similar` –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é:
- **–ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä –±–∞–∫–µ—Ç–∞ >= k**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `find_similar` (–±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –≤ –æ–¥–Ω–æ–º –±–∞–∫–µ—Ç–µ)
- **–ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä –±–∞–∫–µ—Ç–∞ < k**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `find_similar_multi_bucket` (–ø–æ–∏—Å–∫ –≤ 3 –±–ª–∏–∂–∞–π—à–∏—Ö –±–∞–∫–µ—Ç–∞—Ö)

### VectorController

- `add_vector(embedding, metadata, vector_id, vector)` - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
- `get_vector_by_id(id)` - –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ –ø–æ ID
- `remove_vector(id)` - –£–¥–∞–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞
- `find_most_similar(query, k)` - –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤

---

*–§–∞–π–ª `README.md` —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω —Å –ø–æ–º–æ—â—å—é AI, –ø–æ—ç—Ç–æ–º—É –Ω–µ —Å–µ—Ä—á–∞–π—Ç–µ üôÇ*